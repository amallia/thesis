%--------------------------------------------------------------
% thesis.tex
%--------------------------------------------------------------
% Corso di Laurea in Informatica
% http://if.dsi.unifi.it/
% @Facolt\`a di Scienze Matematiche, Fisiche e Naturali
% @Universit\`a degli Studi di Firenze
%--------------------------------------------------------------
% - template for the main file of Informatica@Unifi Thesis
% - based on Classic Thesis Style Copyright (C) 2008
%   Andr\'e Miede http://www.miede.de
%--------------------------------------------------------------
% **************************************************************************************************************
\RequirePackage{silence} % :-\
    \WarningFilter{scrreprt}{Usage of package `titlesec'}
    \WarningFilter{scrreprt}{Activating an ugly workaround}
    \WarningFilter{titlesec}{Non standard sectioning command detected}
\documentclass[ twoside,openright,titlepage,numbers=noenddot,%1headlines,
                headinclude,footinclude,cleardoublepage=empty,
                BCOR=5mm,paper=a4,fontsize=11pt
                ]{scrreprt}

%********************************************************************
% Note: Make all your adjustments in here
%*******************************************************
\input{classicthesis-config}

% Nessun testo che esce dal paragrafo
\tolerance=10000

% Vari pacchetti utilizzati
\usepackage{interval}  % Gestione intervalli aperti/chiusi
\usepackage{colortbl}  % Tabelle con celle colorate
\usepackage[binary-units]{siunitx}  % Unità di misura
\usepackage{algorithm,algpseudocode}  % Algoritmi in pseudo-codice

% Definisci \EUR come unità di misura con il simbolo dell'euro
\usepackage{eurosym}  
\DeclareSIUnit{\EUR}{\text{\euro}}

% Definisci \ceil per fare il ceiling 
\usepackage{mathtools} 
\DeclarePairedDelimiter{\ceil}{\lceil}{\rceil}

% Supporto per UTF-8 nei listati
% Non usiamo il pacchetto listingutf8 e inputencoding=utf-8 perché
% rallenta la compilazione (di minuti...)
\lstset{literate=
  {á}{{\'a}}1 {é}{{\'e}}1 {í}{{\'i}}1 {ó}{{\'o}}1 {ú}{{\'u}}1
  {Á}{{\'A}}1 {É}{{\'E}}1 {Í}{{\'I}}1 {Ó}{{\'O}}1 {Ú}{{\'U}}1
  {à}{{\`a}}1 {è}{{\`e}}1 {ì}{{\`i}}1 {ò}{{\`o}}1 {ù}{{\`u}}1
  {À}{{\`A}}1 {È}{{\'E}}1 {Ì}{{\`I}}1 {Ò}{{\`O}}1 {Ù}{{\`U}}1
  {ä}{{\"a}}1 {ë}{{\"e}}1 {ï}{{\"i}}1 {ö}{{\"o}}1 {ü}{{\"u}}1
  {Ä}{{\"A}}1 {Ë}{{\"E}}1 {Ï}{{\"I}}1 {Ö}{{\"O}}1 {Ü}{{\"U}}1
  {â}{{\^a}}1 {ê}{{\^e}}1 {î}{{\^i}}1 {ô}{{\^o}}1 {û}{{\^u}}1
  {Â}{{\^A}}1 {Ê}{{\^E}}1 {Î}{{\^I}}1 {Ô}{{\^O}}1 {Û}{{\^U}}1
  {œ}{{\oe}}1 {Œ}{{\OE}}1 {æ}{{\ae}}1 {Æ}{{\AE}}1 {ß}{{\ss}}1
  {ű}{{\H{u}}}1 {Ű}{{\H{U}}}1 {ő}{{\H{o}}}1 {Ő}{{\H{O}}}1
  {ç}{{\c c}}1 {Ç}{{\c C}}1 {ø}{{\o}}1 {å}{{\r a}}1 {Å}{{\r A}}1
  {€}{{\euro}}1 {£}{{\pounds}}1 {«}{{\guillemotleft}}1
  {»}{{\guillemotright}}1 {ñ}{{\~n}}1 {Ñ}{{\~N}}1 {¿}{{?`}}1
}

\definecolor{LemonChiffon1}{RGB}{255,250,205}

% Configurazione estetica di default dei listati
\lstset{
  escapechar=|,
  stepnumber=1,
  frame=tb,
  framexleftmargin=0.5em,
  framexrightmargin=0.5em,
  aboveskip=3mm,
  belowskip=3mm,
  columns=flexible,
  stringstyle=\color{red},
  basicstyle=\ttfamily\footnotesize,
  tabsize=4,
  backgroundcolor=\color{LemonChiffon1},
}

% Definzione della colorazione per le sessioni Redis
\lstdefinelanguage{Redis}{
  morekeywords={
    OK, QUEUED,
    SET, GET, DEL, STRLEN, INCR, INCRBY, DECRBY, GETRANGE, APPEND,
    RPUSH, LINDEX, LPOP, LLEN, LINSERT, LRANGE,
    HSET, HMSET, HLEN, HGET, HGETALL, HKEYS, HVALS, HEXISTS,
    SADD, SISMEMBER, SREM, SCARD, SDIFF, SINTER,
    ZADD, ZCARD, ZSCORE, ZRANGE, ZREVRANGE, ZRANGEBYSCORE, ZINCRBY, ZREM,
    PFADD, PFCOUNT, 
    SCRIPT, LOAD,
    EVALSHA,
    WATCH, MULTI, EXEC,
    EXPIREAT, TTL, PTTL, PEXPIRE,
    BFADD, BFCOUNT, BFEXIST, ELEMENTS, ERROR, BFDEBUG, STATUS, FILTER,
  }, 
  sensitive=true,
  moredelim=[s][\color{Maroon}\itshape]{127}{>},
  morestring=[b]", 
}
\lstnewenvironment{redis}[1][]
  {\lstset{language=Redis,#1}}{}

% Macro per caricare un listato inserendo come caption il suo nome
\newcommand{\sourcecode}[2][]{%
    \lstinputlisting[
      caption={\texttt{\detokenize{#2}}},
      basicstyle=\ttfamily\scriptsize, % un po' più piccolo, visto che è l'intero file
      #1
    ]{#2}%
}

%********************************************************************
% Translations
%*******************************************************
\makeatletter
\@ifpackageloaded{babel}{%
  \newcaptionname{italian}{\lstlistingname}{Listato}
  \newcaptionname{italian}{\lstlistlistingname}{Elenco dei listati}
  \newcaptionname{italian}{\ALG@name}{Algoritmo}
  \newcaptionname{italian}{\listalgorithmname}{Elenco degli algoritmi}
}{\relax}
\makeatother

\renewcommand{\algorithmicrequire}{\textbf{Precondizione:}}

% Consente \autoref anche sulle linee
% https://tex.stackexchange.com/questions/351225/create-a-smart-cross-reference-to-a-line-in-an-algorithmic-environment-using/351228
\makeatletter
  \patchcmd{\ALG@step}{\addtocounter{ALG@line}{1}}{\refstepcounter{ALG@line}}{}{}
  \newcommand{\ALG@lineautorefname}{Linea}
\makeatother
\newcommand{\algorithmautorefname}{Algoritmo}%

% \autoref per le linee nei listati
\newcommand{\lstnumberautorefname}{Linea}

%********************************************************************
% Bibliographies
%*******************************************************
\addbibresource{Bibliography.bib}


%********************************************************************
% Hyphenation
%*******************************************************
%\hyphenation{put special hyphenation here}

% ********************************************************************
% GO!GO!GO! MOVE IT!
%*******************************************************
\begin{document}
\frenchspacing
\raggedbottom
\selectlanguage{italian} % american ngerman
%\renewcommand*{\bibname}{new name}
%\setbibpreamble{}
\pagenumbering{roman}
\pagestyle{plain}
%********************************************************************
% Frontmatter
%*******************************************************
%\include{FrontBackmatter/DirtyTitlepage}
\include{FrontBackmatter/Titlepage}
\include{FrontBackmatter/Titleback}
\cleardoublepage\include{FrontBackmatter/Dedication}
%\cleardoublepage\include{FrontBackmatter/Foreword}
%\cleardoublepage\include{FrontBackmatter/Abstract}
%\cleardoublepage\include{FrontBackmatter/Publications}
\cleardoublepage\include{FrontBackmatter/Acknowledgments}
\cleardoublepage\include{FrontBackmatter/Contents}
%********************************************************************
% Mainmatter
%*******************************************************
\cleardoublepage
\pagestyle{scrheadings}
\pagenumbering{arabic}
%\setcounter{page}{90}
% use \cleardoublepage here to avoid problems with pdfbookmark
\cleardoublepage
\include{Chapters/introduzione}
\include{Chapters/redis}
\include{Chapters/bloom}
\include{Chapters/patch}
% ********************************************************************
% Backmatter
%*******************************************************
\appendix
\cleardoublepage
\include{Chapters/codice}
%********************************************************************
% Other Stuff in the Back
%*******************************************************
\cleardoublepage\include{FrontBackmatter/Bibliography}
\cleardoublepage\include{FrontBackmatter/Declaration}
\cleardoublepage\include{FrontBackmatter/Colophon}
% ********************************************************************
% Game Over: Restore, Restart, or Quit?
%*******************************************************
\end{document}
% ********************************************************************
